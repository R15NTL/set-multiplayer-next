import React, { useEffect, useState } from "react";
// Animation
import { motion } from "framer-motion";

const fillOpacityAnimation = [0, 0, 1];
const pathLengthAnimation = [0, 0.4, 1];
const ease = [0.45, 0.15, 0.25, 0.95];

const animateBase = {
  fillOpacity: fillOpacityAnimation,
  pathLength: pathLengthAnimation,
  transition: {
    duration: 1,
    ease,
  },
};

const animateEmpty = animateBase;

const animateShaded = {
  ...animateBase,
  transition: {
    ...animateBase.transition,
    delay: 1,
  },
};

const animateSolid = {
  ...animateBase,
  transition: {
    ...animateBase.transition,
    delay: 2,
  },
};

export default function LoadingScreen() {
  const [count, setCount] = useState(0);
  const [isMounted, setIsMounted] = useState(false);

  // Increment the count every 4 seconds to trigger the animation
  useEffect(() => {
    if (typeof window === "undefined") return;
    setIsMounted(true);

    const interval = setInterval(() => {
      setCount((count) => count + 1);
    }, 4000);

    return () => clearInterval(interval);
  }, []);

  if (!isMounted) return null;

  return (
    <div
      key={`loading-screen-animation-${count}`}
      className="m-auto flex h-32 gap-6"
    >
      <motion.svg
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        x="0px"
        y="0px"
        viewBox="500 0 1000 2000"
        style={{
          fill: "hsl(var(--primary))",
          stroke: "hsl(var(--primary))",
          strokeWidth: "20",
        }}
      >
        {/* Empty */}
        <motion.path
          animate={animateEmpty}
          d="M1099.2,1948.9c-63.8,0-138.6-6.9-212.5-29.4c-76.3-23.3-141.7-60.1-194.4-109.6c-62.8-59-107.7-136-133.5-229
		c-29.4-105.9-29.6-219-0.6-327.1c19-70.9,51.6-178.9,98.5-290.5c30.6-72.8,46.8-148.3,48-224.4c1.9-111.8-24.9-203.8-79.5-273.6
		c-4.2-5-30.7-37.6-55.1-80.6c-37.6-66.3-51.5-124.1-41.3-171.6c8.7-40.7,35-72.8,76-92.9c11.2-6.2,73.3-38.4,166-45.9
		c58.5-4.8,117.5,1.1,175.6,17.5c71.2,20.1,141,56,207.2,106.8c15.1,10,110.9,76.6,178.5,208.8c42.1,82.4,64.8,173.4,67.4,270.6
		c3.2,119.6-24.4,248.6-81.8,383.4c-4.2,9.8-8.7,19.9-14.4,32.1c-8,17.3-34.2,80.9-32.8,174.5c1.8,121.4,48.2,241.9,138,358.2
		c23.2,30.1,36.1,65.5,37.3,102.4c1.4,44.1-13.1,107.9-90.1,161.3c-37.9,26.3-82.8,43.7-129.7,50.3
		C1195,1944.4,1150.7,1948.9,1099.2,1948.9z M645,193l-1.5,0.9l-1.4,0.6c-23.9,11.5-29.6,25.2-31.9,35.9c-5.6,26,5.6,65.8,31.7,112
		c22.2,39.5,47.3,69.6,47.6,69.9l0.9,1.1c36.9,47,63.8,102.5,79.8,165C783,628.2,789,682.6,788,740.3
		c-1.4,86.8-19.8,172.7-54.5,255.3c-45.1,107.3-76.5,211.4-94.8,279.8c-25.2,93.7-25,191.7,0.4,283.3
		c71.5,257.5,294.6,307.5,456.9,307.5c45.9,0,86.9-4,118.3-8.4c34.1-4.8,66.6-17.4,93.9-36.3c37.2-25.8,55.4-56.2,54.4-90.3
		c-0.6-19.3-7.5-38-20-54.1c-54.8-70.9-95.7-144.9-121.6-219.9c-21.5-62.2-32.8-125.4-33.7-188c-1.6-111.3,30.7-189.5,40.6-210.9
		c5.3-11.3,9.5-20.7,13.3-29.6c94.4-221.3,100.7-416.3,18.8-579.7c-31.9-63.6-71.5-109.3-99.1-136.6c-29.5-29.1-52.1-43.8-53.4-44.7
		l-1.8-1.1l-1.5-1.2C1000.5,185.5,891.9,149,781.6,156.9C700.4,162.7,647.4,191.7,645,193z"
        />

        {/* Shaded */}
        <g>
          <motion.path
            animate={animateShaded}
            d="M1099.2,1948.9c-63.8,0-138.6-6.9-212.5-29.4c-76.3-23.3-141.7-60.1-194.4-109.6c-62.8-59-107.7-136-133.5-229
c-29.4-105.9-29.6-219-0.6-327.1c19-70.9,51.6-178.9,98.5-290.5c30.6-72.8,46.8-148.3,48-224.4c1.9-111.8-24.9-203.8-79.5-273.6
c-4.2-5-30.7-37.6-55.1-80.6c-37.6-66.3-51.5-124.1-41.3-171.6c8.7-40.7,35-72.8,76-92.9c11.2-6.2,73.3-38.4,166-45.9
c58.5-4.8,117.5,1.1,175.6,17.5c71.2,20.1,141,56,207.2,106.8c15.1,10,110.9,76.6,178.5,208.8c42.1,82.4,64.8,173.4,67.4,270.6
c3.2,119.6-24.4,248.6-81.8,383.4c-4.2,9.8-8.7,19.9-14.4,32.1c-8,17.3-34.2,80.9-32.8,174.5c1.8,121.4,48.2,241.9,138,358.2
c23.2,30.1,36.1,65.5,37.3,102.4c1.4,44.1-13.1,107.9-90.1,161.3c-37.9,26.3-82.8,43.7-129.7,50.3
C1195,1944.4,1150.7,1948.9,1099.2,1948.9z M645,193l-1.5,0.9l-1.4,0.6c-23.9,11.5-29.6,25.2-31.9,35.9c-5.6,26,5.6,65.8,31.7,112
c22.2,39.5,47.3,69.6,47.6,69.9l0.9,1.1c36.9,47,63.8,102.5,79.8,165C783,628.2,789,682.6,788,740.3
c-1.4,86.8-19.8,172.7-54.5,255.3c-45.1,107.3-76.5,211.4-94.8,279.8c-25.2,93.7-25,191.7,0.4,283.3
c71.5,257.5,294.6,307.5,456.9,307.5c45.9,0,86.9-4,118.3-8.4c34.1-4.8,66.6-17.4,93.9-36.3c37.2-25.8,55.4-56.2,54.4-90.3
c-0.6-19.3-7.5-38-20-54.1c-54.8-70.9-95.7-144.9-121.6-219.9c-21.5-62.2-32.8-125.4-33.7-188c-1.6-111.3,30.7-189.5,40.6-210.9
c5.3-11.3,9.5-20.7,13.3-29.6c94.4-221.3,100.7-416.3,18.8-579.7c-31.9-63.6-71.5-109.3-99.1-136.6c-29.5-29.1-52.1-43.8-53.4-44.7
l-1.8-1.1l-1.5-1.2C1000.5,185.5,891.9,149,781.6,156.9C700.4,162.7,647.4,191.7,645,193z"
          />
        </g>
        <g>
          <motion.rect
            animate={animateShaded}
            x="576.3"
            y="245.5"
            transform="matrix(0.9998 -1.887562e-02 1.887562e-02 0.9998 -5.1559 16.6474)"
            width="606"
            height="71.9"
          />
        </g>
        <g>
          <motion.rect
            animate={animateShaded}
            x="674"
            y="425.7"
            width="642.2"
            height="71.9"
          />
        </g>
        <g>
          <motion.rect
            animate={animateShaded}
            x="744.9"
            y="647.6"
            width="613.2"
            height="71.9"
          />
        </g>
        <g>
          <motion.rect
            animate={animateShaded}
            x="730.1"
            y="848.5"
            width="607.5"
            height="71.9"
          />
        </g>
        <g>
          <motion.rect
            animate={animateShaded}
            x="655.6"
            y="1049.5"
            width="604.7"
            height="71.9"
          />
        </g>
        <g>
          <motion.rect
            animate={animateShaded}
            x="591.8"
            y="1266"
            width="643.9"
            height="71.9"
          />
        </g>
        <g>
          <motion.rect
            animate={animateShaded}
            x="586.4"
            y="1488.1"
            width="703.7"
            height="71.9"
          />
        </g>
        <g>
          <motion.rect
            animate={animateShaded}
            x="675.7"
            y="1693.4"
            width="728.5"
            height="71.9"
          />
        </g>

        {/* Solid */}
        <motion.path
          animate={animateSolid}
          d="M1445.8,1728.4c-1.2-36.9-14.1-72.3-37.3-102.4c-89.8-116.3-136.2-236.8-138-358.2c-1.4-93.6,24.8-157.2,32.8-174.5
	c5.6-12.1,10.2-22.3,14.4-32.1c57.5-134.8,85-263.8,81.8-383.4c-2.6-97.2-25.2-188.2-67.4-270.6
	c-67.6-132.2-163.4-198.9-178.5-208.8c-66.3-50.8-136-86.7-207.2-106.8c-58.1-16.3-117.1-22.2-175.6-17.5
	c-92.7,7.5-154.9,39.8-166,45.9c-41,20.1-67.2,52.2-76,92.9c-10.2,47.5,3.7,105.3,41.3,171.6c24.4,43.1,50.9,75.6,55.1,80.6
	c54.6,69.8,81.4,161.8,79.5,273.6c-1.3,76.1-17.4,151.6-48,224.4c-46.9,111.6-79.5,219.5-98.5,290.5c-29,108.1-28.8,221.2,0.6,327.1
	c25.8,93,70.7,170,133.5,229c52.7,49.5,118.1,86.4,194.4,109.6c73.9,22.5,148.7,29.4,212.5,29.4c51.4,0,95.7-4.5,126.7-8.9
	c46.9-6.6,91.8-24,129.7-50.3C1432.7,1836.3,1447.2,1772.5,1445.8,1728.4z"
        />
      </motion.svg>
    </div>
  );
}
